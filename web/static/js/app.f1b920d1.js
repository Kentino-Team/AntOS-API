(function(e){function t(t){for(var r,u,a=t[0],i=t[1],l=t[2],s=0,f=[];s<a.length;s++)u=a[s],Object.prototype.hasOwnProperty.call(c,u)&&c[u]&&f.push(c[u][0]),c[u]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);b&&b(t);while(f.length)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var i=n[a];0!==c[i]&&(r=!1)}r&&(o.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},c={app:0},o=[];function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],i=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var b=i;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"29b4":function(e,t,n){"use strict";n("79c5")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function c(e,t,n,c,o,u){var a=Object(r["R"])("router-view");return Object(r["I"])(),Object(r["k"])(a)}var o={name:"App"},u=(n("dcca"),n("6b0d")),a=n.n(u);const i=a()(o,[["render",c]]);var l=i,b=n("6c02"),s=(n("b0c0"),function(e){return Object(r["L"])("data-v-cbe2bb6c"),e=e(),Object(r["J"])(),e}),f={class:"home"},d=Object(r["p"])("Home"),j=s((function(){return Object(r["n"])("span",{class:"mdi mdi-plus"},null,-1)})),O=Object(r["p"])(" Nouveau"),p=Object(r["p"])("Annuler"),m=Object(r["p"])("Sauvegarder");function g(e,t,n,c,o,u){var a=this,i=Object(r["R"])("el-breadcrumb-item"),l=Object(r["R"])("el-breadcrumb"),b=Object(r["R"])("el-col"),s=Object(r["R"])("el-button"),g=Object(r["R"])("el-row"),w=Object(r["R"])("FarmCard"),h=Object(r["R"])("el-input"),v=Object(r["R"])("el-form-item"),k=Object(r["R"])("el-form"),_=Object(r["R"])("el-dialog"),y=Object(r["S"])("loading");return Object(r["I"])(),Object(r["m"])("div",f,[Object(r["q"])(g,null,{default:Object(r["gb"])((function(){return[Object(r["q"])(b,{span:21},{default:Object(r["gb"])((function(){return[Object(r["q"])(l,null,{default:Object(r["gb"])((function(){return[Object(r["q"])(i,null,{default:Object(r["gb"])((function(){return[d]})),_:1})]})),_:1})]})),_:1}),Object(r["q"])(b,{span:3},{default:Object(r["gb"])((function(){return[Object(r["q"])(s,{type:"primary",onClick:t[0]||(t[0]=function(e){return o.newDialogVisible=!0})},{default:Object(r["gb"])((function(){return[j,O]})),_:1})]})),_:1})]})),_:1}),Object(r["hb"])(Object(r["q"])(g,{gutter:16},{default:Object(r["gb"])((function(){return[(Object(r["I"])(!0),Object(r["m"])(r["b"],null,Object(r["P"])(o.farms,(function(e){return Object(r["I"])(),Object(r["k"])(b,{key:e,span:8,xs:24,class:"el-farm-col"},{default:Object(r["gb"])((function(){return[Object(r["q"])(w,{title:e.name,onClick:function(){return a.farm_click(e["_id"]["$oid"])},workers:e.workers},null,8,["title","onClick","workers"])]})),_:2},1024)})),128))]})),_:1},512),[[y,o.loading]]),Object(r["q"])(_,{modelValue:o.newDialogVisible,"onUpdate:modelValue":t[3]||(t[3]=function(e){return o.newDialogVisible=e}),title:"Nouveau farm"},{footer:Object(r["gb"])((function(){return[Object(r["q"])(s,{onClick:t[2]||(t[2]=function(e){return o.newDialogVisible=!1})},{default:Object(r["gb"])((function(){return[p]})),_:1}),Object(r["q"])(s,{type:"primary",disabled:u.canSaveNew,onClick:u.saveNewFarm,loading:o.newForm.saveLoading},{default:Object(r["gb"])((function(){return[m]})),_:1},8,["disabled","onClick","loading"])]})),default:Object(r["gb"])((function(){return[Object(r["q"])(k,{model:o.newForm},{default:Object(r["gb"])((function(){return[Object(r["q"])(v,{label:"Nom"},{default:Object(r["gb"])((function(){return[Object(r["q"])(h,{modelValue:o.newForm.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.newForm.name=e}),autocomplete:"off"},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model"])]})),_:1},8,["modelValue"])])}var w=n("1da1"),h=(n("96cf"),n("bc3a")),v=n.n(h),k={"Content-Type":"application/json"},_={get_farms:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("http://localhost:80/farm");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),get_farm:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("http://localhost:80/farm/"+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),post_farm:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.name,e.next=3,v.a.post("http://localhost:80/farm/",{name:n,workers:[]},{headers:k});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),post_worker:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("http://localhost:80/worker",{farm_id:t},{headers:k});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},y=_,R=function(e){return Object(r["L"])("data-v-4732ab7a"),e=e(),Object(r["J"])(),e},q={class:"farm-card"},V={class:"card-header"},I={class:"card-title"},x=R((function(){return Object(r["n"])("span",{class:"mdi mdi-flash"},null,-1)})),S=R((function(){return Object(r["n"])("span",{class:"mdi mdi-pickaxe"},null,-1)}));function W(e,t,n,c,o,u){var a=Object(r["R"])("el-tag"),i=Object(r["R"])("el-col"),l=Object(r["R"])("el-row"),b=Object(r["R"])("el-card");return Object(r["I"])(),Object(r["m"])("div",q,[Object(r["q"])(b,{class:Object(r["z"])("box-card-"+(u.is_online?"online":"offline")),shadow:"hover"},{header:Object(r["gb"])((function(){return[Object(r["n"])("div",V,[Object(r["n"])("span",I,Object(r["V"])(n.title),1),Object(r["q"])(a,{type:"info",class:"card-header-tag"},{default:Object(r["gb"])((function(){return[Object(r["p"])(Object(r["V"])(n.workers.length)+" worker"+Object(r["V"])(u.plurial_worker),1)]})),_:1})])]})),default:Object(r["gb"])((function(){return[Object(r["q"])(l,null,{default:Object(r["gb"])((function(){return[Object(r["q"])(i,{span:12},{default:Object(r["gb"])((function(){return[Object(r["n"])("span",null,[Object(r["p"])(Object(r["V"])(u.total_power)+"W ",1),x])]})),_:1}),Object(r["q"])(i,{span:12},{default:Object(r["gb"])((function(){return[Object(r["n"])("span",null,[Object(r["p"])(Object(r["V"])(u.total_khs)+"kh/s ",1),S])]})),_:1})]})),_:1})]})),_:1},8,["class"])])}n("d81d");var F={name:"FarmCard",props:{title:String,workers:Array},methods:{reducing_acc:function(e,t){return e+t}},computed:{plurial_worker:function(){return this.workers.length<=1?"":"s"},total_khs:function(){return this.workers.length>0?this.workers.map((function(e){var t;return 0|(null===(t=e.stats)||void 0===t?void 0:t.total_khs)})).reduce(this.reducing_acc):0},total_power:function(){var e=this;return this.workers.length>0?this.workers.map((function(t){var n;return 0|(null===(n=t.stats)||void 0===n?void 0:n.power.reduce(e.reducing_acc))})).reduce(this.reducing_acc):0},is_online:function(){return this.total_power>0}}};n("29b4");const P=a()(F,[["render",W],["__scopeId","data-v-4732ab7a"]]);var C=P,B={name:"Home",components:{FarmCard:C},data:function(){return{farms:[],loading:!0,newDialogVisible:!1,newForm:{name:"",saveLoading:!1}}},mounted:function(){var e=this;y.get_farms().then((function(t){e.farms=t.data,e.loading=!1}))},methods:{farm_click:function(e){this.$router.push("/farm/"+e)},saveNewFarm:function(){var e=this;this.newForm.saveLoading=!0,y.post_farm(this.newForm).then((function(t){201===t.status&&e.$router.go()}))}},computed:{canSaveNew:function(){return""===this.newForm.name}}};n("c072");const D=a()(B,[["render",g],["__scopeId","data-v-cbe2bb6c"]]);var L=D,N=function(e){return Object(r["L"])("data-v-5eaacd9e"),e=e(),Object(r["J"])(),e},$={class:"farm"},z=Object(r["p"])("Home"),J=N((function(){return Object(r["n"])("p",null,"Workers:",-1)})),T=N((function(){return Object(r["n"])("span",{class:"mdi mdi-lightning-bolt"},null,-1)})),A=Object(r["p"])("80h/s "),H=N((function(){return Object(r["n"])("span",{class:"mdi mdi-pickaxe"},null,-1)})),M=N((function(){return Object(r["n"])("span",{class:"mdi mdi-plus",style:{"font-size":"1.3rem"}},null,-1)})),U=N((function(){return Object(r["n"])("p",null,"ID:",-1)})),G=N((function(){return Object(r["n"])("p",null,"Password:",-1)})),Q={class:"dialog-footer"},E=Object(r["p"])("Fermer");function K(e,t,n,c,o,u){var a,i=this,l=Object(r["R"])("el-breadcrumb-item"),b=Object(r["R"])("el-breadcrumb"),s=Object(r["R"])("el-col"),f=Object(r["R"])("el-row"),d=Object(r["R"])("el-empty"),j=Object(r["R"])("RoundStatus"),O=Object(r["R"])("el-tag"),p=Object(r["R"])("el-space"),m=Object(r["R"])("BannerButton"),g=Object(r["R"])("el-button"),w=Object(r["R"])("el-dialog"),h=Object(r["S"])("loading");return Object(r["hb"])((Object(r["I"])(),Object(r["m"])("div",$,[Object(r["q"])(f,null,{default:Object(r["gb"])((function(){return[Object(r["q"])(s,null,{default:Object(r["gb"])((function(){return[Object(r["q"])(b,{"separator-class":"mdi mdi-chevron-right"},{default:Object(r["gb"])((function(){return[Object(r["q"])(l,{to:{path:"/"}},{default:Object(r["gb"])((function(){return[z]})),_:1}),Object(r["q"])(l,null,{default:Object(r["gb"])((function(){return[Object(r["p"])(Object(r["V"])(o.farm.name),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(r["n"])("h2",null,Object(r["V"])(o.farm.name),1),Object(r["q"])(f,null,{default:Object(r["gb"])((function(){return[Object(r["q"])(s,{align:"left"},{default:Object(r["gb"])((function(){return[J]})),_:1})]})),_:1}),0===(null===(a=o.farm.workers)||void 0===a?void 0:a.length)?(Object(r["I"])(),Object(r["k"])(d,{key:0,description:"Aucun worker ajouté à ce farm"})):Object(r["l"])("",!0),(Object(r["I"])(!0),Object(r["m"])(r["b"],null,Object(r["P"])(o.farm.workers,(function(e,t){return Object(r["I"])(),Object(r["k"])(f,{key:e,class:"row-workers"},{default:Object(r["gb"])((function(){return[Object(r["q"])(s,null,{default:Object(r["gb"])((function(){return[Object(r["q"])(m,{left:""},{default:Object(r["gb"])((function(){return[Object(r["q"])(j,{type:u.workerStatusPower(t)},null,8,["type"]),Object(r["p"])(" Rig #"+Object(r["V"])(e.id)+" ("+Object(r["V"])(e.name)+") ",1),Object(r["q"])(p,null,{default:Object(r["gb"])((function(){return[Object(r["q"])(O,{size:"mini",type:"success",class:"tag-worker"},{default:Object(r["gb"])((function(){return[Object(r["p"])(Object(r["V"])(u.workerTotalGpu(t))+" GPUs",1)]})),_:2},1024),Object(r["q"])(O,{size:"mini",type:"warning",class:"tag-worker"},{default:Object(r["gb"])((function(){return[Object(r["p"])(Object(r["V"])(u.workerPower(t))+"W ",1),T]})),_:2},1024),Object(r["q"])(O,{size:"mini",type:"primary",class:"tag-worker"},{default:Object(r["gb"])((function(){return[A,H]})),_:1})]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)})),128)),Object(r["q"])(f,null,{default:Object(r["gb"])((function(){return[Object(r["q"])(s,null,{default:Object(r["gb"])((function(){return[Object(r["q"])(m,{type:"primary",loading:o.newWorkerBtnLoading,onClick:u.generateNewWorker},{default:Object(r["gb"])((function(){return[M]})),_:1},8,["loading","onClick"])]})),_:1})]})),_:1}),Object(r["q"])(w,{modelValue:o.newWorkerDialogVisible,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.newWorkerDialogVisible=e}),title:"Nouveau worker"},{footer:Object(r["gb"])((function(){return[Object(r["n"])("span",Q,[Object(r["q"])(g,{onClick:t[0]||(t[0]=function(e){return o.newWorkerDialogVisible=!1})},{default:Object(r["gb"])((function(){return[E]})),_:1})])]})),default:Object(r["gb"])((function(){return[U,Object(r["n"])("h3",null,Object(r["V"])(i.newWorkerInfos.id),1),G,Object(r["n"])("p",null,Object(r["V"])(i.newWorkerInfos.pwd),1)]})),_:1},8,["modelValue"])],512)),[[h,o.loading]])}function X(e,t,n,c,o,u){var a=Object(r["R"])("el-button");return Object(r["I"])(),Object(r["k"])(a,Object(r["x"])(e.$props,{class:["banner-button",[n.left?"banner-button-align-left":""]],plain:""}),{default:Object(r["gb"])((function(){return[Object(r["Q"])(e.$slots,"default",{},void 0,!0)]})),_:3},16,["class"])}var Y={name:"BannerButton",props:{left:Boolean,loading:Boolean}};n("fa95");const Z=a()(Y,[["render",X],["__scopeId","data-v-22b46290"]]);var ee=Z;function te(e,t,n,c,o,u){return Object(r["I"])(),Object(r["m"])("div",{class:Object(r["z"])(["round-status",u.colorStatus])},null,2)}var ne={name:"RoundStatus",props:{type:String},computed:{colorStatus:function(){switch(this.type){case"success":return"status-success";case"error":return"status-error";default:return""}}}};n("bf7b");const re=a()(ne,[["render",te],["__scopeId","data-v-bfb7006e"]]);var ce=re,oe={name:"Farm",data:function(){return{farm:{},loading:!0,newWorkerDialogVisible:!1,newWorkerBtnLoading:!1,newWorkerInfos:{id:-1,pwd:""}}},mounted:function(){var e=this;y.get_farm(this.$route.params.id).then((function(t){console.log(t.data),e.farm=t.data,e.loading=!1}))},components:{BannerButton:ee,RoundStatus:ce},methods:{workerStatusPower:function(e){return this.workerPower(e)?"success":"error"},workerPower:function(e){var t;return 0|(null===(t=this.farm.workers[e].stats)||void 0===t?void 0:t.power.reduce((function(e,t){return e+t})))},workerTotalGpu:function(e){var t;return 0|(null===(t=this.farm.workers[e].hardwares)||void 0===t?void 0:t.gpu.length)},generateNewWorker:function(){var e=this;this.newWorkerBtnLoading=!0,y.post_worker(this.farm._id.$oid).then((function(t){e.newWorkerInfos=t.data,e.newWorkerBtnLoading=!1,e.newWorkerDialogVisible=!0}))}}};n("85c9");const ue=a()(oe,[["render",K],["__scopeId","data-v-5eaacd9e"]]);var ae=ue,ie=[{path:"/",name:"Home",component:L},{path:"/farm/:id",name:"Farm",component:ae}],le=Object(b["a"])({history:Object(b["b"])(),routes:ie}),be=le,se=n("5502"),fe=Object(se["a"])({state:{},mutations:{},actions:{},modules:{}}),de=n("7864"),je=(n("7dd6"),function(e){e.use(de["a"])}),Oe=(n("41e6"),Object(r["j"])(l));je(Oe),Oe.use(fe).use(be).mount("#app")},7269:function(e,t,n){},"79c5":function(e,t,n){},"85c9":function(e,t,n){"use strict";n("a0f5")},"913d":function(e,t,n){},9809:function(e,t,n){},a0f5:function(e,t,n){},bf7b:function(e,t,n){"use strict";n("7269")},c072:function(e,t,n){"use strict";n("913d")},dcca:function(e,t,n){"use strict";n("e647")},e647:function(e,t,n){},fa95:function(e,t,n){"use strict";n("9809")}});
//# sourceMappingURL=app.f1b920d1.js.map